# JavaScript设计模式

JavaScript的语言特性——动态弱类型语言。

常用的设计模式

第一部分：

- 静态类型和动态类型语言的区别和他们在设计模式方面的不同。
- JavaScript面向对象开发和函数编程方式，以及它们在设计模式中的体现。

- 动态类型语言中的封装，继承和多态，基于原型继承的面向对象开发。     

第二部分：

- 16种设计模式

第三部分：

- 面向对象编程中的设计原则。面向对象编程的编程技巧和代码重构。



**为了解决同一个问题而编写的代码，发现那些高质量代码中的相似之处并命名为一种模式。**

设计模式常常与静态类型的语言，但设计模式在动态类型的语言中同样存在。**设计模式的实现常见于面向对象编程中。**

​                                                                                                                                                                                                        

**设计模式定义：在面向对象软件设计过程中针对特定的问题的简洁而优雅的解决方案（在某种场合下对某个问题的一种解决方案 ）。**



也许一个程序员并没有系统学习过设计模式，但是他可能在日常开发中经常使用一些类似的代码结构来解决一些问题，只是他不知道他的这种写法被称为某种设计模式。



项目中存在一些大量的相似对象，这些对象比较占内存，就可以使用一种设计模式——享元模式对代码进行优化；比如项目中某个接口的结构已经不能符合目前的需求，但又不想直接修改带接口结构，那么就可以借助适配器模式来处理这个问题。

在面向对象开发中，通过对封装，继承，多态和组合等技术的反复使用，可以实现一些编程技巧。

设计模式本身是一种思想，而与语言无关。只是有些语言因为自己的特性，天然对一些设计模式更加友好。



一定程度上，设计模式是有可能增加源码量同时增加复杂度，但软件开发的成本并非全在开发阶段。而设计模式能让人写出可复用，高可维护性的程序代码。   

所有的设计模式都是在找出程序中变化的部分，并将变化的部分封装起来。  

有一些设计模式的类图或者结构看起来非常像，以至于常常混淆它们。辨别模式的关键时这个模式出现的场景和它能解决的问题。



es6之前，JavaScript没有类式继承，而只有基于原型委托方式来实现对象之间的继承。

没有对抽象类和接口的支持



动态类型的语言中面向接口编程是一件相对容易的事情，而在静态类型的语言中，面向接口编程往往要通过抽象类或者接口将参数能能接受的数据类型的范围扩大（对象的向上转型：当给一个变量赋值时，这个变量的类型既可以是这个类本身，也可以是这个类的超类。）。而对象的真正类型则是父类（超类）下面的细分子类，只有这样才能在避免语言的类型检测系统的报错，同时能体现出函数的多态性。   

多态的作用时通过把过程化的条件分支语句转化为对象的多态性，从而消除这些条件分支语句。

将行为分布到各个对象中，并让这些对象各自负责自己的行为，这就是面向对象编程。



**多态**：不同的参数传递给一个函数，该函数会有不同的表现。

基础知识盲区：

> new 构造函数时，如果构造函数内部显示的返回一个对象类型的值，那么最终返回值就是这个对象类型的值，而不是this指代的那个对象。
>
> 构造函数不显式的返回任何类型的数据或者返回的是一个非引用类型的数据时，则默认返回的是this指代的对象值。



> 在使用call或者apply时，如果我们传入的第一个参数时null，那么函数体中的this在非严格模式下会指向默认的宿主对象。



v8源码中关于push的实现：

```js
function ArrayPush(){
    var n = TO_UINT32(this.length)   // 被push的对象的length
    var m = %_ArgumentsLength()   // push的参数个数
    for(var i = 0;i<m;i++){
        this[i+n] = %_Arguments(i)   // 复制元素， 说明对象本身可以支持属性的读取
    }
    this.length = n+m    // 修改length属性值   对象的length属性可读可写
    return this.length
}
```



函数的length 属性时一个只读属性，表示的是形参的个数。如果通过push.call将函数传入作为this，则会报错说函数的length是一个只读属性。

